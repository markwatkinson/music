<div class='bar'>
    <div class='playback-controls'>

        <a href='#' class='control'
        data-bind="text: $root.playlistVM.controls.playOrPauseText,
            click: $root.playlistVM.controls.playOrPauseClick,
            css : {
                'play' : $root.playlistVM.state() !== $root.playlistVM.playStates.PLAYING,
                'pause': $root.playlistVM.state() === $root.playlistVM.playStates.PLAYING
            }
        "></a>
        <a href='#' data-bind="click: $root.playlistVM.playlist.stop" class='control stop'>Stop</a>
        <a href='#' data-bind="click: $root.playlistVM.playlist.next" class='control next'>Next</a>
        <input type="range" step="any" id="seekbar" min=0 data-bind="attr: {max: $root.playlistVM.playlist.currentSongLength()},
            value: $root.playlistVM.playlist.seek"></input>
    </div>

    <!-- ko if: $root.playlistVM.playlist.currentSong() -->
    <div class='now-playing' data-bind='
        visible: $root.playlistVM.playlist.currentSong(),
        style: { backgroundImage: "url(/art/" + $root.playlistVM.playlist.currentSong().path() + "?s=96)" }'
    >
        <span class='title song-title' data-bind='text: $root.playlistVM.playlist.currentSong().title'></span>
        <span class='title artist-name' data-bind='text: $root.playlistVM.playlist.currentSong().album.artist.name'></span>
        <span class='title album-title' data-bind='text: $root.playlistVM.playlist.currentSong().album.title'></span>
    </div>
    <!-- /ko -->
    <div class='playlist-controls'>
        <div>
            <label data-bind='visible: $root.playlistVM.knownPlaylists().length'> Playlist: 
            <select data-bind='options: $root.playlistVM.knownPlaylists,
                value: $root.playlistVM.playlist.name,
                event: { change : function($data, event) { $root.playlistVM.selectPlaylistChange(event) } }
            '></select></label>
            <a href='#' data-bind="click: function() {$root.playlistVM.newPlaylist(true)}">New Playlist</a>
            <form data-bind="
                visible: $root.playlistVM.newPlaylist(),
                submit: $root.playlistVM.createNewPlaylist
            ">
                <label>Name <input type='text'></label>
                <input type='submit' value='Create'/>
                <input type='button' value='Cancel' data-bind='click: function() {$root.playlistVM.newPlaylist(false)}'/>
            </form>
        </div>
        <label>Repeat 
            <input type='checkbox' data-bind='checked: $root.playlistVM.playlist.repeat'>
        </label>
        <label>Random 
            <input type='checkbox' data-bind='checked: $root.playlistVM.playlist.random'>
        </label>
        <br>
        <a href='#' data-bind='click: $root.playlistVM.playlist.clear'>Clear</a>
    </div>
</div>

<div class='grid-container'>
    <!-- because CSS is stupid, to get a scrollable table and keep the widths nice
        , we have to set up two identical tables, one with a hidden thead and one with a hidden
        tbody. -->
    <div class='header' data-bind='template: "playlist-grid"'></div>
    <div class='body' data-bind='template: "playlist-grid",
        style: {height: $root.screenVM.playlistGridHeight() + "px"}
    '></div>
    
</div>
